<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-82b21c4badf2b3742632e8f006a51c80.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.32">
<meta name="author" content="Prof Amanda Luby">
<title>Stat 220 – Text Analysis</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
<link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
<link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #97947a;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #97947a;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2; background-color: #2b2b2b; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #dcc6e0; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #ffd700; } /* Attribute */
    code span.bn { color: #dcc6e0; } /* BaseN */
    code span.bu { color: #f5ab35; } /* BuiltIn */
    code span.cf { color: #ffa07a; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffa07a; } /* Constant */
    code span.co { color: #d4d0ab; } /* Comment */
    code span.cv { color: #d4d0ab; font-style: italic; } /* CommentVar */
    code span.do { color: #d4d0ab; font-style: italic; } /* Documentation */
    code span.dt { color: #dcc6e0; } /* DataType */
    code span.dv { color: #dcc6e0; } /* DecVal */
    code span.er { color: #dcc6e0; } /* Error */
    code span.ex { color: #ffd700; } /* Extension */
    code span.fl { color: #f5ab35; } /* Float */
    code span.fu { color: #ffd700; } /* Function */
    code span.im { color: #f8f8f2; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; } /* Keyword */
    code span.op { color: #00e0e0; } /* Operator */
    code span.ot { color: #ffa07a; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.sc { color: #00e0e0; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #f5ab35; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #d4d0ab; font-style: italic; } /* Warning */
  </style>
<link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-9be35e48ac5ff9906ccc019449422c46.css">
<link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
<link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
<link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
<link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
<link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
<link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
<style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
<style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<link href="../../site_libs/countdown-0.4.0/countdown.css" rel="stylesheet">
<script src="../../site_libs/countdown-0.4.0/countdown.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="../img/horst_stringr.jpeg" data-background-opacity="0.8" data-background-position="bottom right" data-background-size="70%" data-slide-number="none" class="quarto-title-block center"><h1 class="title">Text Analysis</h1>
  <p class="subtitle">Day 14</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Prof Amanda Luby 
</div>
        <p class="quarto-title-affiliation">
            Carleton College <br> Stat 220 - Winter 2025
          </p>
    </div>
</div>

</section><section id="today" class="slide level2 scrollable"><h2>Today</h2>
<ol type="1">
<li class="fragment">Midterm check-in</li>
<li class="fragment">Questions about lab quiz, project, etc.</li>
<li class="fragment">Regex</li>
<li class="fragment">Intro to Text Analysis</li>
</ol></section><section id="midterm-check-in" class="slide level2 scrollable"><h2>Midterm check-in</h2>
<p>Things that are going well:</p>
<ul>
<li class="fragment">Like getting immediate practice in class</li>
<li class="fragment">Learning a lot on homeworks</li>
<li class="fragment">Becoming more efficient/neater/cleaner/cleverer in R</li>
<li class="fragment">Building a presence on GitHub</li>
<li class="fragment">Working with peers</li>
<li class="fragment">Building confidence</li>
<li class="fragment">
<code>ggplot</code> skills</li>
<li class="fragment">Enjoying coming to class (demos, lectures, group work, activities)</li>
</ul></section><section id="overview-of-responses" class="slide level2"><h2>Overview of responses</h2>
<p>[graphs from google]</p>
</section><section id="suggested-changes" class="slide level2"><h2>Suggested changes:</h2>
<ul>
<li class="fragment">Cheat sheets on quizzes ✅</li>
<li class="fragment">Post solutions to in-class exercises ✅</li>
<li class="fragment">More time for in-class lab quizzes ﹖</li>
</ul>
<h3 id="my-takeaways">My takeaways</h3>
<ul>
<li class="fragment">More direction on portfolio projects with clear rubrics</li>
<li class="fragment">Limit “tricky” homework problems each assignment</li>
<li class="fragment">Do more live coding/demos in class</li>
</ul></section><section id="suggested-changes-1" class="slide level2"><h2>Suggested changes:</h2>
<ul>
<li class="fragment">Lectures aren’t helpful and we should dedicate more time to in-class coding practice</li>
<li class="fragment">Please spend more time explaining commands and doing demos before we do in-class coding practice</li>
<li class="fragment">We should have more time doing “your turn” activities so we have time to talk through them in groups</li>
<li class="fragment">We should condense the time spent on “your turn” activities so we can get through everything on the slides and have more demos</li>
<li class="fragment">The homeworks stress me out because they’re too long; fewer problems would help</li>
<li class="fragment">The homeworks stress me out because they sometimes contain less than 10 problems. Maybe they should be longer?</li>
</ul></section><section id="concerns-about-grading-scheme" class="slide level2"><h2>Concerns about grading scheme:</h2>
<ul>
<li class="fragment">Lots of frustration about lack of partial credit on homework</li>
<li class="fragment">Still getting comfy with revisions on projects
<ul>
<li class="fragment">“I worked really hard and made a couple small mistakes and had to do a revision”</li>
</ul>
</li>
<li class="fragment">“Bar” for homework/portfolio projects feels high</li>
<li class="fragment">Time pressures on lab quizzes</li>
</ul></section><section id="goals-of-the-grading-scheme" class="slide level2 smaller"><h2>Goals of the grading scheme:</h2>
<div class="columns">
<div class="column fragment" style="width:33%;">
<p><strong>Homework</strong></p>
<ul>
<li>Can you apply techniques from class/readings in new settings?</li>
<li>Can you read R documentation to figure out new things?</li>
<li>Can you work through some tricky ideas without a time limit?</li>
</ul>
</div><div class="column fragment" style="width:33%;">
<p><strong>Portfolio Projects</strong></p>
<ul>
<li>Can you answer less-structured questions with data?</li>
<li>Are you learning how to “scope” a data analysis?</li>
<li>Can you put together a polished final product?</li>
</ul>
</div><div class="column fragment" style="width:33%;">
<p><strong>Lab Quizzes</strong></p>
<ul>
<li>Can you repeat things we have done in class and on homework with limited access to resources?</li>
<li>Are you learning how to answer questions with data quickly?</li>
<li>Are you developing proficiency with R?</li>
</ul>
</div></div>
<div class="fragment">
<h3 id="revision-is-a-key-part-of-this-course-design">Revision is a key part of this course design!</h3>
</div>
</section><section id="questions-about-lab-quiz-projects" class="title-slide slide level1 maize center"><h1>Questions about lab quiz, projects?</h1>

</section><section><section id="regex" class="title-slide slide level1 maize center"><h1>Regex</h1>

</section><section id="example" class="slide level2"><h2>Example</h2>
<p>Suppose we wish to anonymize phone numbers in survey results</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>a1 <span class="ot">&lt;-</span> <span class="st">"Home: 507-645-5489"</span></span>
<span id="cb1-2"><a></a>a2 <span class="ot">&lt;-</span> <span class="st">"Cell: 219.917.9871"</span></span>
<span id="cb1-3"><a></a>a3 <span class="ot">&lt;-</span> <span class="st">"My work phone is 507-202-2332"</span></span>
<span id="cb1-4"><a></a>a4 <span class="ot">&lt;-</span> <span class="st">"I don't have a phone"</span></span>
<span id="cb1-5"><a></a>info <span class="ot">&lt;-</span> <span class="fu">c</span>(a1, a2, a3, a4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Home: 507-645-5489"            "Cell: 219.917.9871"           
[3] "My work phone is 507-202-2332" "I don't have a phone"         </code></pre>
</div>
</div>
</section><section id="visualizing-matches" class="slide level2"><h2>Visualizing matches</h2>
<p>The helper function <code>str_view()</code> finds regex matches</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">str_view</span>(a1, <span class="st">"5"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Home: &lt;5&gt;07-64&lt;5&gt;-&lt;5&gt;489</code></pre>
</div>
</div>
</section><section id="match-any-character" class="slide level2"><h2>
<code>.</code> match any character</h2>
<p>Find a “-” and any (.) character that follows</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="fu">str_view</span>(a1, <span class="st">"-."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Home: 507&lt;-6&gt;45&lt;-5&gt;489</code></pre>
</div>
</div>
</section><section id="match-any-occurence" class="slide level2"><h2>
<code>[]</code> match any occurence</h2>
<p>Find any numbers between 0 and 9</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">str_view</span>(a1, <span class="st">"[0123456789]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Home: &lt;5&gt;&lt;0&gt;&lt;7&gt;-&lt;6&gt;&lt;4&gt;&lt;5&gt;-&lt;5&gt;&lt;4&gt;&lt;8&gt;&lt;9&gt;</code></pre>
</div>
</div>
</section><section id="match-any-occurence-1" class="slide level2"><h2>
<code>[]</code> match any occurence</h2>
<p>Find any numbers between 2 and 7</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">str_view</span>(a1, <span class="st">"[2-7]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Home: &lt;5&gt;0&lt;7&gt;-&lt;6&gt;&lt;4&gt;&lt;5&gt;-&lt;5&gt;&lt;4&gt;89</code></pre>
</div>
</div>
</section><section id="your-turn" class="slide level2"><h2>Your turn:</h2>
<div class="task">
<p>Detect either “.” or “-” in the <code>info</code> vector.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>a1 <span class="ot">&lt;-</span> <span class="st">"Home: 507-645-5489"</span></span>
<span id="cb11-2"><a></a>a2 <span class="ot">&lt;-</span> <span class="st">"Cell: 219.917.9871"</span></span>
<span id="cb11-3"><a></a>a3 <span class="ot">&lt;-</span> <span class="st">"My work phone is 507-202-2332"</span></span>
<span id="cb11-4"><a></a>a4 <span class="ot">&lt;-</span> <span class="st">"I don't have a phone"</span></span>
<span id="cb11-5"><a></a>info <span class="ot">&lt;-</span> <span class="fu">c</span>(a1, a2, a3, a4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_afa9ba70" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls">
<button class="countdown-bump-down">−</button><button class="countdown-bump-up">&amp;plus;</button>
</div>
<code class="countdown-time"><span class="countdown-digits minutes">02</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section><section id="special-patterns" class="slide level2"><h2>Special patterns</h2>
<p>There are a number of special patterns that match more than one character</p>
<div>
<ul>
<li>
<code>\\d</code> - digit</li>
<li>
<code>\\s</code> - white space</li>
<li>
<code>\\w</code> - word</li>
<li>
<code>\\t</code> - tab</li>
<li>
<code>\\n</code> - newline</li>
</ul>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="fu">str_view</span>(a1, <span class="st">"</span><span class="sc">\\</span><span class="st">d"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Home: &lt;5&gt;&lt;0&gt;&lt;7&gt;-&lt;6&gt;&lt;4&gt;&lt;5&gt;-&lt;5&gt;&lt;4&gt;&lt;8&gt;&lt;9&gt;</code></pre>
</div>
</div>

</div>
<aside><div>
<p>Outside of R, these would be single back slashes.</p>
</div></aside></section><section id="caution" class="slide level2"><h2>Caution!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="fu">str_view</span>(a1, <span class="st">"</span><span class="sc">\\</span><span class="st">w"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;H&gt;&lt;o&gt;&lt;m&gt;&lt;e&gt;: &lt;5&gt;&lt;0&gt;&lt;7&gt;-&lt;6&gt;&lt;4&gt;&lt;5&gt;-&lt;5&gt;&lt;4&gt;&lt;8&gt;&lt;9&gt;</code></pre>
</div>
</div>
</section><section id="match-any-occurence-except" class="slide level2"><h2>
<code>[^]</code> match any occurence except</h2>
<p>ANYTHING BUT numbers between 2 and 7</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">str_view</span>(a1, <span class="st">"[^2-7]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;H&gt;&lt;o&gt;&lt;m&gt;&lt;e&gt;&lt;:&gt;&lt; &gt;5&lt;0&gt;7&lt;-&gt;645&lt;-&gt;54&lt;8&gt;&lt;9&gt;</code></pre>
</div>
</div>

<aside><div>
<p>Common pitfall: forgetting the brackets</p>
</div></aside></section><section id="anchors" class="slide level2"><h2>Anchors</h2>
<p>Anchors look for matches at the start <code>^</code> or end <code>$</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Home: 507-645-5489
[2] │ Cell: 219.917.9871
[3] │ My work phone is 507-202-2332
[4] │ I don't have a phone</code></pre>
</div>
</div>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby">
<li><a data-tabby-default="" href="#tabset-1-1">Entries that start with a digit</a></li>
<li><a href="#tabset-1-2">Entries that end with a digit</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a><span class="fu">str_view</span>(info, <span class="st">"^</span><span class="sc">\\</span><span class="st">d"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="fu">str_view</span>(info, <span class="st">"</span><span class="sc">\\</span><span class="st">d$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Home: 507-645-548&lt;9&gt;
[2] │ Cell: 219.917.987&lt;1&gt;
[3] │ My work phone is 507-202-233&lt;2&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="use-regex-in-str_detect-str_sub-etc" class="slide level2"><h2>Use regex in <code>str_detect</code>, <code>str_sub</code>, etc:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a><span class="fu">str_view</span>(info)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Home: 507-645-5489
[2] │ Cell: 219.917.9871
[3] │ My work phone is 507-202-2332
[4] │ I don't have a phone</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a><span class="fu">str_detect</span>(info, <span class="st">"</span><span class="sc">\\</span><span class="st">d"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE  TRUE FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="fu">str_replace_all</span>(info, <span class="st">"</span><span class="sc">\\</span><span class="st">d"</span>, <span class="st">"X"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Home: XXX-XXX-XXXX"            "Cell: XXX.XXX.XXXX"           
[3] "My work phone is XXX-XXX-XXXX" "I don't have a phone"         </code></pre>
</div>
</div>
</section><section id="your-turn-1" class="slide level2"><h2>Your turn</h2>
<div class="task">
<p>Fill in the code to determine how many baby names in 2015 ended with a vowel.</p>
<p>Use a regular expression to specify the pattern.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a></a>  <span class="fu">___</span>(___ <span class="sc">==</span> ___) <span class="sc">%&gt;%</span>                       <span class="co"># extract year 2015</span></span>
<span id="cb28-3"><a></a>  <span class="fu">___</span>(<span class="at">ends_with_vowel =</span> <span class="fu">___</span>(___, ___)) <span class="sc">%&gt;%</span>  <span class="co"># create logical column</span></span>
<span id="cb28-4"><a></a>  <span class="fu">count</span>(ends_with_vowel)                    <span class="co"># create a frequency table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_6fc83beb" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls">
<button class="countdown-bump-down">−</button><button class="countdown-bump-up">&amp;plus;</button>
</div>
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section><section id="alternative-patterns" class="slide level2"><h2>Alternative patterns</h2>
<p><code>|</code> allows you to match one or more alternative patterns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a><span class="fu">str_view</span>(info, <span class="st">"^H|C"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;H&gt;ome: 507-645-5489
[2] │ &lt;C&gt;ell: 219.917.9871</code></pre>
</div>
</div>
</section><section id="fixing-the-order-of-operations" class="slide level2"><h2>“Fixing” the order of operations</h2>
<p>Why are these different?</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a><span class="fu">str_view</span>(info, <span class="st">"^H|C."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;H&gt;ome: 507-645-5489
[2] │ &lt;Ce&gt;ll: 219.917.9871</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a><span class="fu">str_view</span>(info, <span class="st">"^(H|C)."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;Ho&gt;me: 507-645-5489
[2] │ &lt;Ce&gt;ll: 219.917.9871</code></pre>
</div>
</div>
</div></div>
</section><section id="repetition" class="slide level2"><h2>Repetition</h2>
<p>You can search for a pattern followed by the number of matches</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>
<code>?</code>: 0 or 1</li>
<li>
<code>+</code>: 1 or more</li>
<li>
<code>*</code>: 0 or more</li>
<li>
<code>{n}</code>: exactly n times</li>
<li>
<code>{n,}</code>: n or more times</li>
<li>
<code>{,m}</code>: at most m times</li>
<li>
<code>{n,m}</code>: between n and m times</li>
</ul>
</div><div class="column fragment" style="width:50%;">
<p>Example: detect three digits in a row</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a><span class="fu">str_view</span>(a1, <span class="st">"</span><span class="sc">\\</span><span class="st">d{3}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Home: &lt;507&gt;-&lt;645&gt;-&lt;548&gt;9</code></pre>
</div>
</div>
</div></div>
</section><section id="your-turn-2" class="slide level2"><h2>Your turn:</h2>
<p>Fill in the code to determine how many baby names in 2015 started or ended with a vowel.</p>
<p>Use a regular expression to specify the pattern.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a></a>  <span class="fu">___</span>(___ <span class="sc">==</span> ___) <span class="sc">%&gt;%</span>           </span>
<span id="cb37-3"><a></a>  <span class="fu">___</span>(<span class="at">bookend.vowel =</span> <span class="fu">___</span>(___, ___)) <span class="sc">%&gt;%</span>  </span>
<span id="cb37-4"><a></a>  <span class="fu">count</span>(bookend.vowel)             </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_c5c60ff1" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls">
<button class="countdown-bump-down">−</button><button class="countdown-bump-up">&amp;plus;</button>
</div>
<code class="countdown-time"><span class="countdown-digits minutes">02</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section><section id="duplicating-groups" class="slide level2"><h2>Duplicating groups</h2>
<p>Use escaped numbers (<code>\\1</code>, <code>\\2</code>, etc) to repeat a group based on position</p>
<p>Which numbers have the same 1st and 3rd digits?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a>phone_numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"515 111 2244"</span>, <span class="st">"310 549 6892"</span>, <span class="st">"474 234 7548"</span>)</span>
<span id="cb38-2"><a></a><span class="fu">str_view</span>(phone_numbers, <span class="st">"(</span><span class="sc">\\</span><span class="st">d)</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;515&gt; &lt;111&gt; 2244
[3] │ &lt;474&gt; 234 7548</code></pre>
</div>
</div>
</section><section id="your-turn-if-time" class="slide level2"><h2>Your turn (if time)</h2>
<div class="task">
<p>Try the regular expressions from <code>13-strings-regex.rmd</code></p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a>countdown<span class="sc">::</span><span class="fu">countdown</span>(<span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="countdown" id="timer_9b67541d" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls">
<button class="countdown-bump-down">−</button><button class="countdown-bump-up">&amp;plus;</button>
</div>
<code class="countdown-time"><span class="countdown-digits minutes">06</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section></section><section><section id="intro-to-text-analysis" class="title-slide slide level1 maize center"><h1>Intro to Text Analysis</h1>

</section><section id="text-analysis" class="slide level2"><h2>Text Analysis</h2>
<p>Up to this point, we’ve been thinking of string data as a column in our dataset:</p>
<ul>
<li class="fragment">Names</li>
<li class="fragment">Phone numbers</li>
<li class="fragment">Addresses</li>
<li class="fragment">Course titles</li>
<li class="fragment">etc.</li>
</ul>
<div class="fragment">
<p>which are all relatively short and structured. We can extract meaning from them using relatively simple functions.</p>
</div>
</section><section id="sometimes-text-data-is-more-unstructured" class="slide level2"><h2>Sometimes, text data is more unstructured</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a><span class="fu">library</span>(mdsr)</span>
<span id="cb41-2"><a></a>DataSciencePapers <span class="ot">&lt;-</span> DataSciencePapers <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-4"><a></a>    <span class="at">submitted =</span> lubridate<span class="sc">::</span><span class="fu">ymd_hms</span>(submitted), </span>
<span id="cb41-5"><a></a>    <span class="at">updated =</span> lubridate<span class="sc">::</span><span class="fu">ymd_hms</span>(updated)</span>
<span id="cb41-6"><a></a>  )</span>
<span id="cb41-7"><a></a><span class="fu">glimpse</span>(DataSciencePapers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,089
Columns: 15
$ id               &lt;chr&gt; "astro-ph/0701361v1", "0901.2805v1", "0901.3118v2", "…
$ submitted        &lt;dttm&gt; 2007-01-12 03:28:11, 2009-01-19 10:38:33, 2009-01-20…
$ updated          &lt;dttm&gt; 2007-01-12 03:28:11, 2009-01-19 10:38:33, 2009-01-24…
$ title            &lt;chr&gt; "How to Make the Dream Come True: The Astronomers' Da…
$ abstract         &lt;chr&gt; "  Astronomy is one of the most data-intensive of the…
$ authors          &lt;chr&gt; "Ray P Norris", "Heinz Andernach", "O. V. Verkhodanov…
$ affiliations     &lt;chr&gt; "", "", "Special Astrophysical Observatory, Nizhnij A…
$ link_abstract    &lt;chr&gt; "http://arxiv.org/abs/astro-ph/0701361v1", "http://ar…
$ link_pdf         &lt;chr&gt; "http://arxiv.org/pdf/astro-ph/0701361v1", "http://ar…
$ link_doi         &lt;chr&gt; "", "http://dx.doi.org/10.2481/dsj.8.41", "http://dx.…
$ comment          &lt;chr&gt; "Submitted to Data Science Journal Presented at CODAT…
$ journal_ref      &lt;chr&gt; "", "", "", "", "EPJ Data Science, 1:9, 2012", "", "E…
$ doi              &lt;chr&gt; "", "10.2481/dsj.8.41", "10.2481/dsj.8.34", "", "10.1…
$ primary_category &lt;chr&gt; "astro-ph", "astro-ph.IM", "astro-ph.IM", "astro-ph.I…
$ categories       &lt;chr&gt; "astro-ph", "astro-ph.IM|astro-ph.CO", "astro-ph.IM|a…</code></pre>
</div>
</div>
<p><em>Note:</em> may need to install <code>mdsr</code>, <code>tidytext</code> and <code>stopwords</code> packages</p>
</section><section id="section" class="slide level2"><h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a>DataSciencePapers <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(abstract, <span class="st">"grammar of graphics"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a></a>  <span class="fu">pull</span>(abstract)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "  The R programming language is built on an ecosystem of packages, some that\nallow analysts to accomplish the same tasks. For example, there are at least\ntwo clear workflows for creating data visualizations in R: using the base\ngraphics package (referred to as \"base R\") and the ggplot2 add-on package based\non the grammar of graphics. Here we perform an empirical study of the quality\nof scientific graphics produced by beginning R users. In our experiment,\nlearners taking a data science course on the Coursera platform were randomized\nto complete identical plotting exercises in either the base R or the ggplot2\nsystem. Learners were then asked to evaluate their peers in terms of visual\ncharacteristics key to scientific cognition. We observed that graphics created\nwith the two systems rated similarly on many characteristics. However, ggplot2\ngraphics were generally judged to be more visually pleasing and, in the case of\nfaceted scientific plots, easier to understand. Our results suggest that while\nboth graphic systems are useful in the hands of beginning users, ggplot2's\nnatural faceting system may be easier to use by beginning users for displaying\nmore complex relationships.\n"</code></pre>
</div>
</div>
</section><section id="section-1" class="slide level2 center"><h2></h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="https://juliasilge.github.io/tidytext/reference/figures/tidytext.png" style="width:60.0%"></p>
</div><div class="column" style="width:50%;">
<ul>
<li><p>Functions for text analysis that follow tidy data principles</p></li>
<li><p><em>Not</em> part of the <code>tidyverse</code>, but plays well with other packages</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a><span class="fu">library</span>(tidytext)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section><section id="some-notation" class="slide level2"><h2>Some notation</h2>
<p><em>document</em>: an observation of text data (in this case, an abstract)</p>
<div class="fragment">
<p><em>corpus</em>: collection of many documents</p>
</div>
<div class="fragment">
<p><em>token</em>: a unit of analysis within the document (typically a word, but could be a sentence or a line or a pair of words, etc.)</p>
</div>
</section><section id="text-as-tidy-data" class="slide level2 scrollable"><h2>Text as tidy data</h2>
<ol type="1">
<li class="fragment">
<em>tokenize</em> each document
<ul>
<li class="fragment">Each <em>row</em> in the dataset is a token</li>
</ul>
</li>
<li class="fragment">Remove <em>stopwords</em>
<ul>
<li class="fragment">Words like “the” and “is” typically aren’t interesting</li>
<li class="fragment">Makes the dataset smaller and easier to work with</li>
</ul>
</li>
<li class="fragment">Count the tokens</li>
<li class="fragment">(optional) <em>fancy count</em> the tokens
<ul>
<li class="fragment">Standardize based on total number of tokens</li>
<li class="fragment">How common is a token <em>relative to other documents</em>
</li>
<li class="fragment">How common are “good words” or “bad words”</li>
<li class="fragment">How common are <em>pairs of words</em>
</li>
</ul>
</li>
</ol></section><section id="unnest_tokens" class="slide level2"><h2><code>unnest_tokens()</code></h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment">
<code>tbl</code>: our data</li>
<li class="fragment">
<code>output</code>: what should the output column be called?</li>
<li class="fragment">
<code>input</code>: what column do we tokenize?</li>
<li class="fragment">
<code>token</code>: default is “word” but can also be “ngrams”, “sentences”, “lines”, “pargraphs”, etc.</li>
<li class="fragment">
<code>to_lower</code>: should tokens be converted to lowercase</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a></a><span class="fu">unnest_tokens</span>(</span>
<span id="cb46-2"><a></a>  tbl,</span>
<span id="cb46-3"><a></a>  output,</span>
<span id="cb46-4"><a></a>  input,</span>
<span id="cb46-5"><a></a>  <span class="at">token =</span> <span class="st">"words"</span>,</span>
<span id="cb46-6"><a></a>  <span class="at">to_lower =</span> <span class="cn">TRUE</span>,</span>
<span id="cb46-7"><a></a>  <span class="at">drop =</span> <span class="cn">TRUE</span>,</span>
<span id="cb46-8"><a></a>  ...</span>
<span id="cb46-9"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section><section id="tokenize" class="slide level2"><h2>Tokenize</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="fu">library</span>(tidytext)</span>
<span id="cb47-2"><a></a>DataSciencePapers <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> abstract) <span class="sc">|&gt;</span></span>
<span id="cb47-4"><a></a>  <span class="fu">select</span>(id, word)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 194,983 × 2
   id                 word     
   &lt;chr&gt;              &lt;chr&gt;    
 1 astro-ph/0701361v1 astronomy
 2 astro-ph/0701361v1 is       
 3 astro-ph/0701361v1 one      
 4 astro-ph/0701361v1 of       
 5 astro-ph/0701361v1 the      
 6 astro-ph/0701361v1 most     
 7 astro-ph/0701361v1 data     
 8 astro-ph/0701361v1 intensive
 9 astro-ph/0701361v1 of       
10 astro-ph/0701361v1 the      
# ℹ 194,973 more rows</code></pre>
</div>
</div>
</section><section id="remove-stopwords" class="slide level2"><h2>Remove stopwords</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb49" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a>DataSciencePapers <span class="sc">|&gt;</span></span>
<span id="cb49-2"><a></a>  <span class="fu">unnest_tokens</span>(word, abstract) <span class="sc">|&gt;</span></span>
<span id="cb49-3"><a></a>  <span class="fu">anti_join</span>(<span class="fu">get_stopwords</span>(<span class="at">source =</span> <span class="st">"stopwords-iso"</span>), <span class="at">by =</span> <span class="st">"word"</span>) <span class="sc">|&gt;</span></span>
<span id="cb49-4"><a></a>  <span class="fu">select</span>(id, word)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 98,780 × 2
   id                 word         
   &lt;chr&gt;              &lt;chr&gt;        
 1 astro-ph/0701361v1 astronomy    
 2 astro-ph/0701361v1 data         
 3 astro-ph/0701361v1 intensive    
 4 astro-ph/0701361v1 sciences     
 5 astro-ph/0701361v1 data         
 6 astro-ph/0701361v1 technology   
 7 astro-ph/0701361v1 accelerating 
 8 astro-ph/0701361v1 quality      
 9 astro-ph/0701361v1 effectiveness
10 astro-ph/0701361v1 rate         
# ℹ 98,770 more rows</code></pre>
</div>
</div>
</section><section id="aside-clean-the-categories" class="slide level2"><h2>Aside: clean the categories</h2>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a>DataSciencePapers <span class="sc">|&gt;</span></span>
<span id="cb51-2"><a></a>  <span class="fu">select</span>(primary_category) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,089 × 1
   primary_category
   &lt;chr&gt;           
 1 astro-ph        
 2 astro-ph.IM     
 3 astro-ph.IM     
 4 astro-ph.IM     
 5 cs.SI           
 6 astro-ph.IM     
 7 cs.CL           
 8 physics.soc-ph  
 9 physics.geo-ph  
10 physics.soc-ph  
# ℹ 1,079 more rows</code></pre>
</div>
</div></div>
</section><section id="aside-clean-the-categories-1" class="slide level2"><h2>Aside: clean the categories</h2>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a>DataSciencePapers <span class="sc">|&gt;</span></span>
<span id="cb53-2"><a></a>  <span class="fu">separate</span>(primary_category, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"broad"</span>, <span class="st">"specific"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>) <span class="sc">|&gt;</span></span>
<span id="cb53-3"><a></a>  <span class="fu">select</span>(broad, specific) <span class="sc">|&gt;</span></span>
<span id="cb53-4"><a></a>  <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 99 × 2
   broad    specific
   &lt;chr&gt;    &lt;chr&gt;   
 1 astro-ph &lt;NA&gt;    
 2 astro-ph IM      
 3 cs       SI      
 4 cs       CL      
 5 physics  soc-ph  
 6 physics  geo-ph  
 7 q-bio    PE      
 8 stat     AP      
 9 cs       SE      
10 physics  ed-ph   
# ℹ 89 more rows</code></pre>
</div>
</div></div>
</section><section id="count-the-tokens" class="slide level2"><h2>Count the tokens</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb55" data-code-line-numbers="4-5|6|7|8-10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a>DataSciencePapers <span class="sc">|&gt;</span></span>
<span id="cb55-2"><a></a>  <span class="fu">unnest_tokens</span>(word, abstract) <span class="sc">|&gt;</span></span>
<span id="cb55-3"><a></a>  <span class="fu">anti_join</span>(<span class="fu">get_stopwords</span>(<span class="at">source =</span> <span class="st">"stopwords-iso"</span>), <span class="at">by =</span> <span class="st">"word"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a></a>  <span class="fu">group_by</span>(broad) <span class="sc">%&gt;%</span></span>
<span id="cb55-5"><a></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span></span>
<span id="cb55-6"><a></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-7"><a></a>  <span class="fu">filter</span>(broad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"physics"</span>, <span class="st">"cs"</span>, <span class="st">"stat"</span>, <span class="st">"math"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb55-8"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> n, <span class="at">y =</span> <span class="fu">fct_reorder</span>(word, n))) <span class="sc">+</span> </span>
<span id="cb55-9"><a></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb55-10"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>broad, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span> </span>
<span id="cb55-11"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb55-12"><a></a>    <span class="at">y =</span> <span class="st">"Word"</span></span>
<span id="cb55-13"><a></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section><section id="count-the-tokens-output" class="slide level2 output-location-slide"><h2>Count the tokens</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<div>
<figure><p><img data-src="slides14_files/figure-revealjs/unnamed-chunk-37-1.png" width="960"></p>
</figure>
</div>
</div>
</div></section><section id="make-it-fancy-n-grams" class="slide level2"><h2>Make it ~ fancy ~: n-grams</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment">
<code>token</code> is set to “ngrams”</li>
<li class="fragment">also specify <code>n=2</code> (2 words)</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a></a><span class="fu">unnest_tokens</span>(</span>
<span id="cb56-2"><a></a>  tbl,</span>
<span id="cb56-3"><a></a>  output,</span>
<span id="cb56-4"><a></a>  input,</span>
<span id="cb56-5"><a></a>  <span class="at">token =</span> <span class="st">"words"</span>,</span>
<span id="cb56-6"><a></a>  <span class="at">to_lower =</span> <span class="cn">TRUE</span>,</span>
<span id="cb56-7"><a></a>  <span class="at">drop =</span> <span class="cn">TRUE</span>,</span>
<span id="cb56-8"><a></a>  ...</span>
<span id="cb56-9"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section><section id="make-it-fancy-n-grams-1" class="slide level2"><h2>Make it ~ fancy ~: n-grams</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb57" data-code-line-numbers="2,4,7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a></a>arxiv_papers <span class="sc">|&gt;</span></span>
<span id="cb57-2"><a></a>  <span class="fu">unnest_tokens</span>(bigram, abstract_clean, <span class="at">token =</span> <span class="st">"ngrams"</span>, <span class="at">n =</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb57-3"><a></a>  <span class="fu">group_by</span>(broad) <span class="sc">%&gt;%</span></span>
<span id="cb57-4"><a></a>  <span class="fu">count</span>(bigram) <span class="sc">%&gt;%</span></span>
<span id="cb57-5"><a></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-6"><a></a>  <span class="fu">filter</span>(broad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"physics"</span>, <span class="st">"cs"</span>, <span class="st">"stat"</span>, <span class="st">"math"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb57-7"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> n, <span class="at">y =</span> <span class="fu">fct_reorder</span>(bigram, n))) <span class="sc">+</span> </span>
<span id="cb57-8"><a></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb57-9"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>broad, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span> </span>
<span id="cb57-10"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb57-11"><a></a>    <span class="at">y =</span> <span class="st">"2-gram"</span></span>
<span id="cb57-12"><a></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section><section id="make-it-fancy-n-grams-1-output" class="slide level2 output-location-slide"><h2>Make it ~ fancy ~: n-grams</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<div>
<figure><p><img data-src="slides14_files/figure-revealjs/unnamed-chunk-40-1.png" width="960"></p>
</figure>
</div>
</div>
</div></section><section id="what-if-we-remove-bigrams-that-include-data" class="slide level2"><h2>What if we remove bigrams that include “data”?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb58" data-code-line-numbers="5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a></a>arxiv_papers <span class="sc">|&gt;</span></span>
<span id="cb58-2"><a></a>  <span class="fu">unnest_tokens</span>(bigram, abstract_clean, <span class="at">token =</span> <span class="st">"ngrams"</span>, <span class="at">n =</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-3"><a></a>  <span class="fu">group_by</span>(broad) <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a></a>  <span class="fu">count</span>(bigram) <span class="sc">%&gt;%</span></span>
<span id="cb58-5"><a></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(bigram, <span class="st">"data"</span>, <span class="at">negate =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb58-6"><a></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-7"><a></a>  <span class="fu">filter</span>( n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-8"><a></a>  <span class="fu">filter</span>(broad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"physics"</span>, <span class="st">"cs"</span>, <span class="st">"stat"</span>, <span class="st">"math"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb58-9"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> n, <span class="at">y =</span> <span class="fu">fct_reorder</span>(bigram, n))) <span class="sc">+</span> </span>
<span id="cb58-10"><a></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb58-11"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>broad, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span> </span>
<span id="cb58-12"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb58-13"><a></a>    <span class="at">y =</span> <span class="st">"2-gram"</span></span>
<span id="cb58-14"><a></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section><section id="what-if-we-remove-bigrams-that-include-data-output" class="slide level2 output-location-slide"><h2>What if we remove bigrams that include “data”?</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<div>
<figure><p><img data-src="slides14_files/figure-revealjs/unnamed-chunk-41-1.png" width="960"></p>
</figure>
</div>
</div>
</div></section><section id="make-it-fancy-tf-idf" class="slide level2"><h2>Make it ~ fancy ~: tf-idf</h2>
<p>Idea: how common are certain tokens <em>relative to the rest of the documents in the corpus</em>?</p>
<div class="fragment">
<p>tf(t,d) = “term frequency”: what proportion of document d is term t?</p>
</div>
<div class="fragment">
<p>idf = “inverse document frequency”: log-scaled inverse fraction of documents that contain the term</p>
<p><span class="math display">\[\text{idf} = \log \frac{\text{number of documents}}{\text{number of documents containing term t}}\]</span></p>
</div>
<div class="fragment">
<p><span class="math display">\[\text{tf-df(t, d)} = \frac{\text{tf(t, d)}}{\text{idf(t)}}\]</span></p>
</div>
</section><section id="highest-tf-idfs-are-used-a-lot-within-an-abstract-and-rarely-in-other-abstracts" class="slide level2"><h2>highest tf-idf’s are used a lot within an abstract, and rarely in other abstracts</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a>arxiv_papers <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a></a>  <span class="fu">unnest_tokens</span>(word, abstract_clean) <span class="sc">|&gt;</span></span>
<span id="cb59-3"><a></a>  <span class="fu">count</span>(id, word) <span class="sc">|&gt;</span></span>
<span id="cb59-4"><a></a>  <span class="fu">bind_tf_idf</span>(word, id, n) <span class="sc">|&gt;</span></span>
<span id="cb59-5"><a></a>  <span class="fu">group_by</span>(word) <span class="sc">|&gt;</span></span>
<span id="cb59-6"><a></a>  <span class="fu">mutate</span>(<span class="at">total_n =</span> <span class="fu">sum</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb59-7"><a></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb59-8"><a></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(tf_idf)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 74,165 × 7
   id           word            n    tf   idf tf_idf total_n
   &lt;chr&gt;        &lt;chr&gt;       &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;int&gt;
 1 2007.12681v1 fintech         8 0.154  6.99  1.08        8
 2 1707.07029v1 reflections     1 0.167  6.30  1.05        2
 3 1507.00333v3 mf             14 0.14   6.99  0.979      14
 4 1906.04572v1 utv             8 0.116  6.99  0.811       8
 5 2006.00371v1 ridge           3 0.125  6.30  0.787       4
 6 1907.09387v1 4.0             5 0.102  6.99  0.714       5
 7 1906.04572v1 cor             7 0.101  6.99  0.709       7
 8 2001.06937v1 gans           10 0.122  5.61  0.684      13
 9 1606.06769v1 traffic        17 0.17   4.00  0.680      63
10 1810.10989v3 speech          7 0.130  5.20  0.674      15
# ℹ 74,155 more rows</code></pre>
</div>
</div>
</section><section id="section-2" class="slide level2"><h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb61" data-code-line-numbers="4|5-6|7,10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a></a>arxiv_papers <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a></a>  <span class="fu">unnest_tokens</span>(word, abstract_clean) <span class="sc">|&gt;</span></span>
<span id="cb61-3"><a></a>  <span class="fu">count</span>(id, word) <span class="sc">|&gt;</span></span>
<span id="cb61-4"><a></a>  <span class="fu">bind_tf_idf</span>(word, id, n) <span class="sc">|&gt;</span></span>
<span id="cb61-5"><a></a>  <span class="fu">left_join</span>(arxiv_papers <span class="sc">|&gt;</span></span>
<span id="cb61-6"><a></a>              <span class="fu">select</span>(id, broad)) <span class="sc">|&gt;</span></span>
<span id="cb61-7"><a></a>  <span class="fu">group_by</span>(broad) <span class="sc">%&gt;%</span></span>
<span id="cb61-8"><a></a>  <span class="fu">slice_max</span>(tf_idf, <span class="at">n =</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-9"><a></a>  <span class="fu">filter</span>(broad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"physics"</span>, <span class="st">"cs"</span>, <span class="st">"stat"</span>, <span class="st">"math"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb61-10"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> n, <span class="at">y =</span> <span class="fu">fct_reorder</span>(word, n))) <span class="sc">+</span> </span>
<span id="cb61-11"><a></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb61-12"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>broad, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span> </span>
<span id="cb61-13"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb61-14"><a></a>    <span class="at">y =</span> <span class="st">"word"</span></span>
<span id="cb61-15"><a></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section><section id="section-2-output" class="slide level2 output-location-slide"><h2></h2><div class="cell output-location-slide">
<div class="cell-output-display">
<div>
<figure><p><img data-src="slides14_files/figure-revealjs/unnamed-chunk-43-1.png" width="960"></p>
</figure>
</div>
</div>
</div></section><section id="your-turn-3" class="slide level2"><h2>Your turn:</h2>
<div class="task">
<p>Try to learn something new from the arXiv data, using <code>stringr</code> or <code>tidytext</code> tools</p>
<ul>
<li>Try a <em>trigram</em> analysis</li>
<li>In the bigram analysis, we treated “data” as a stopword. Try customizing your own stopwords.</li>
<li>Try a text analysis of the arXiv <em>titles</em> rather than the abstracts.</li>
</ul>
</div>


</section></section>
</div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="https://stat220-w25.github.io">🔗 stat220-w25.github.io</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="../../site_libs/revealjs/dist/reveal.js"></script><!-- reveal.js plugins --><script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script><script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script><script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script><script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script><script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script><script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script><script src="../../site_libs/revealjs/plugin/notes/notes.js"></script><script src="../../site_libs/revealjs/plugin/search/search.js"></script><script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script><script src="../../site_libs/revealjs/plugin/math/math.js"></script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script><script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script><script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>


</body></html>